---
date: 2011-01-13
title: spring 详细配置
---


<p><span style="font-family: Arial, sans-serif, Helvetica, Tahoma; line-height: 18px;">PROPAGATION_REQUIRED -- 支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择。&nbsp;<br />PROPAGATION_SUPPORTS -- 支持当前事务，如果当前没有事务，就以非事务方式执行。&nbsp;<br />PROPAGATION_MANDATORY -- 支持当前事务，如果当前没有事务，就抛出异常。&nbsp;<br />PROPAGATION_REQUIRES_NEW -- 新建事务，如果当前存在事务，把当前事务挂起。&nbsp;<br />PROPAGATION_NOT_SUPPORTED -- 以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。&nbsp;<br />PROPAGATION_NEVER -- 以非事务方式执行，如果当前存在事务，则抛出异常。&nbsp;<br />PROPAGATION_NESTED -- 如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则进行与PROPAGATION_REQUIRED类似的操作。&nbsp;</span></p> <p><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 13px; color: #4b4b4b; line-height: 19px;">   <div class="postTitle" style="font-size: 14.7px; font-weight: bold; margin-bottom: 10px;">   <a id="viewpost1_TitleUrl" class="postTitle2" style="text-decoration: none; color: #1a8bc8;" href="http://www.blogjava.net/robbie/archive/2009/04/05/264003.html">Spring事务配置的五种方式</a>  </div> <p>&nbsp;&nbsp;&nbsp; 前段时间对Spring的事务配置做了比较深入的研究，在此之间对Spring的事务配置虽说也配置过，但是一直没有一个清楚的认识。通过这次的学习发觉Spring的事务配置只要把思路理清，还是比较好掌握的。</p> <p>&nbsp;&nbsp;&nbsp; 总结如下：</p> <p>&nbsp;&nbsp;&nbsp; Spring配置文件中关于事务配置总是由三个组成部分，分别是DataSource、TransactionManager和代理机制这三部分，无论哪种配置方式，一般变化的只是代理机制这部分。</p> <p>&nbsp;&nbsp;&nbsp; DataSource、TransactionManager这两部分只是会根据数据访问方式有所变化，比如使用Hibernate进行数据访问时，DataSource实际为SessionFactory，TransactionManager的实现为HibernateTransactionManager。</p> <p>&nbsp;&nbsp;&nbsp; 具体如下图：</p> <p><a style="color: #1a8bc8; text-decoration: none;" href="http://www.blogjava.net/images/blogjava_net/robbie/WindowsLiveWriter/Spring_9C9C/Spring%E4%BA%8B%E5%8A%A1%E9%85%8D%E7%BD%AE%20(2).jpg"><img style="" src="http://www.blogjava.net/images/blogjava_net/robbie/WindowsLiveWriter/Spring_9C9C/Spring%E4%BA%8B%E5%8A%A1%E9%85%8D%E7%BD%AE%20(2)_thumb.jpg" border="0" alt="Spring事务配置 (2)" width="654" height="378" /></a></p> <p>&nbsp;&nbsp;&nbsp; 根据代理机制的不同，总结了五种Spring事务的配置方式，配置文件如下：</p> <p>&nbsp;&nbsp;&nbsp; 第一种方式：每个Bean都有一个代理</p>   <div style="padding-top: 4px; padding-right: 5px; padding-bottom: 4px; padding-left: 4px; background-color: #eeeeee; width: 1080px; font-size: 13px; border: 1px solid #cccccc;">    <span style="color: #0000ff;">&lt;?</span>   <span style="color: #ff00ff;">xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;</span>   <span style="color: #0000ff;">?&gt;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">beans&nbsp;</span>   <span style="color: #ff0000;">xmlns</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:xsi</span>   <span style="color: #0000ff;">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:context</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/context&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:aop</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/aop&quot;</span>   <span style="color: #ff0000;"><br /></span>   <span style="color: #ff0000;">&nbsp;&nbsp;&nbsp; xsi:schemaLocation</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/beans/spring-beans-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context/spring-context-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configLocation&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;classpath:hibernate.cfg.xml&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configurationClass&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;org.hibernate.cfg.AnnotationConfiguration&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;定义事务管理器（声明式的事务）&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;配置DAO&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;userDaoTarget&quot;</span>   <span style="color: #ff0000;">&nbsp;class</span>   <span style="color: #0000ff;">=&quot;com.bluesky.spring.dao.UserDaoImpl&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;userDao&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.transaction.interceptor.TransactionProxyFactoryBean&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;配置事务管理器&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;target&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;userDaoTarget&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;proxyInterfaces&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;com.bluesky.spring.dao.GeneratorDao&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;配置事务属性&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;transactionAttributes&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">props</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">prop&nbsp;</span>   <span style="color: #ff0000;">key</span>   <span style="color: #0000ff;">=&quot;*&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">PROPAGATION_REQUIRED</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">prop</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">props</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">property</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">beans</span>   <span style="color: #0000ff;">&gt;</span>   </div> <p>&nbsp;&nbsp;&nbsp; 第二种方式：所有Bean共享一个代理基类</p>   <div style="padding-top: 4px; padding-right: 5px; padding-bottom: 4px; padding-left: 4px; background-color: #eeeeee; width: 1080px; font-size: 13px; border: 1px solid #cccccc;">    <span style="color: #0000ff;">&lt;?</span>   <span style="color: #ff00ff;">xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;</span>   <span style="color: #0000ff;">?&gt;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">beans&nbsp;</span>   <span style="color: #ff0000;">xmlns</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:xsi</span>   <span style="color: #0000ff;">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:context</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/context&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:aop</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/aop&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xsi:schemaLocation</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/beans/spring-beans-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context/spring-context-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configLocation&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;classpath:hibernate.cfg.xml&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configurationClass&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;org.hibernate.cfg.AnnotationConfiguration&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;定义事务管理器（声明式的事务）&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;transactionBase&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.transaction.interceptor.TransactionProxyFactoryBean&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lazy-init</span>   <span style="color: #0000ff;">=&quot;true&quot;</span>   <span style="color: #ff0000;">&nbsp;abstract</span>   <span style="color: #0000ff;">=&quot;true&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;配置事务管理器&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;配置事务属性&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;transactionAttributes&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">props</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">prop&nbsp;</span>   <span style="color: #ff0000;">key</span>   <span style="color: #0000ff;">=&quot;*&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">PROPAGATION_REQUIRED</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">prop</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">props</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">property</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;配置DAO&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;userDaoTarget&quot;</span>   <span style="color: #ff0000;">&nbsp;class</span>   <span style="color: #0000ff;">=&quot;com.bluesky.spring.dao.UserDaoImpl&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;userDao&quot;</span>   <span style="color: #ff0000;">&nbsp;parent</span>   <span style="color: #0000ff;">=&quot;transactionBase&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;target&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;userDaoTarget&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">beans</span>   <span style="color: #0000ff;">&gt;</span>   </div> <p>第三种方式：使用拦截器</p>   <div style="padding-top: 4px; padding-right: 5px; padding-bottom: 4px; padding-left: 4px; background-color: #eeeeee; width: 1080px; font-size: 13px; border: 1px solid #cccccc;">    <span style="color: #0000ff;">&lt;?</span>   <span style="color: #ff00ff;">xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;</span>   <span style="color: #0000ff;">?&gt;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">beans&nbsp;</span>   <span style="color: #ff0000;">xmlns</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:xsi</span>   <span style="color: #0000ff;">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:context</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/context&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:aop</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/aop&quot;</span>   <span style="color: #ff0000;"><br /></span>   <span style="color: #ff0000;">&nbsp;&nbsp;&nbsp; xsi:schemaLocation</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/beans/spring-beans-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context/spring-context-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configLocation&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;classpath:hibernate.cfg.xml&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configurationClass&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;org.hibernate.cfg.AnnotationConfiguration&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;定义事务管理器（声明式的事务）&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;transactionInterceptor&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.transaction.interceptor.TransactionInterceptor&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;配置事务属性&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;transactionAttributes&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">props</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">prop&nbsp;</span>   <span style="color: #ff0000;">key</span>   <span style="color: #0000ff;">=&quot;*&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">PROPAGATION_REQUIRED</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">prop</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">props</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">property</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">class</span>   <span style="color: #0000ff;">=&quot;org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;beanNames&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">list</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">value</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">*Dao</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">value</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">list</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">property</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;interceptorNames&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">list</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">value</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">transactionInterceptor</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">value</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">list</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">property</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;配置DAO&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;userDao&quot;</span>   <span style="color: #ff0000;">&nbsp;class</span>   <span style="color: #0000ff;">=&quot;com.bluesky.spring.dao.UserDaoImpl&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">beans</span>   <span style="color: #0000ff;">&gt;</span>   </div> <p>第四种方式：使用tx标签配置的拦截器</p>   <div style="padding-top: 4px; padding-right: 5px; padding-bottom: 4px; padding-left: 4px; background-color: #eeeeee; width: 1080px; font-size: 13px; border: 1px solid #cccccc;">    <span style="color: #0000ff;">&lt;?</span>   <span style="color: #ff00ff;">xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;</span>   <span style="color: #0000ff;">?&gt;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">beans&nbsp;</span>   <span style="color: #ff0000;">xmlns</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:xsi</span>   <span style="color: #0000ff;">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:context</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/context&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:aop</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/aop&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:tx</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/tx&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xsi:schemaLocation</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/beans/spring-beans-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context/spring-context-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">context:annotation-config&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">context:component-scan&nbsp;</span>   <span style="color: #ff0000;">base-package</span>   <span style="color: #0000ff;">=&quot;com.bluesky&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configLocation&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;classpath:hibernate.cfg.xml&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configurationClass&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;org.hibernate.cfg.AnnotationConfiguration&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;定义事务管理器（声明式的事务）&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">tx:advice&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;txAdvice&quot;</span>   <span style="color: #ff0000;">&nbsp;transaction-manager</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">tx:attributes</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">tx:method&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;*&quot;</span>   <span style="color: #ff0000;">&nbsp;propagation</span>   <span style="color: #0000ff;">=&quot;REQUIRED&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">tx:attributes</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">tx:advice</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">aop:config</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">aop:pointcut&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;interceptorPointCuts&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; expression</span>   <span style="color: #0000ff;">=&quot;execution(* com.bluesky.spring.dao.*.*(..))&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">aop:advisor&nbsp;</span>   <span style="color: #ff0000;">advice-ref</span>   <span style="color: #0000ff;">=&quot;txAdvice&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pointcut-ref</span>   <span style="color: #0000ff;">=&quot;interceptorPointCuts&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">aop:config</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">beans</span>   <span style="color: #0000ff;">&gt;</span>   </div> <p>第五种方式：全注解</p>   <div style="padding-top: 4px; padding-right: 5px; padding-bottom: 4px; padding-left: 4px; background-color: #eeeeee; width: 1080px; font-size: 13px; border: 1px solid #cccccc;">    <span style="color: #0000ff;">&lt;?</span>   <span style="color: #ff00ff;">xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;</span>   <span style="color: #0000ff;">?&gt;</span>   <span style="color: #000000;"><br /></span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">beans&nbsp;</span>   <span style="color: #ff0000;">xmlns</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:xsi</span>   <span style="color: #0000ff;">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:context</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/context&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:aop</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/aop&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xmlns:tx</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/tx&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp; xsi:schemaLocation</span>   <span style="color: #0000ff;">=&quot;http://www.springframework.org/schema/beans&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/beans/spring-beans-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/context/spring-context-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">context:annotation-config&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">context:component-scan&nbsp;</span>   <span style="color: #ff0000;">base-package</span>   <span style="color: #0000ff;">=&quot;com.bluesky&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">tx:annotation-driven&nbsp;</span>   <span style="color: #ff0000;">transaction-manager</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configLocation&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;classpath:hibernate.cfg.xml&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;configurationClass&quot;</span>   <span style="color: #ff0000;">&nbsp;value</span>   <span style="color: #0000ff;">=&quot;org.hibernate.cfg.AnnotationConfiguration&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #008000;">&lt;!--</span>   <span style="color: #008000;">&nbsp;定义事务管理器（声明式的事务）&nbsp;</span>   <span style="color: #008000;">--&gt;</span>   <span style="color: #000000;">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">bean&nbsp;</span>   <span style="color: #ff0000;">id</span>   <span style="color: #0000ff;">=&quot;transactionManager&quot;</span>   <span style="color: #ff0000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class</span>   <span style="color: #0000ff;">=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;</span>   <span style="color: #800000;">property&nbsp;</span>   <span style="color: #ff0000;">name</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;ref</span>   <span style="color: #0000ff;">=&quot;sessionFactory&quot;</span>   <span style="color: #ff0000;">&nbsp;</span>   <span style="color: #0000ff;">/&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">bean</span>   <span style="color: #0000ff;">&gt;</span>   <span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></span>   <span style="color: #0000ff;">&lt;/</span>   <span style="color: #800000;">beans</span>   <span style="color: #0000ff;">&gt;</span>   </div> <p>此时在DAO上需加上@Transactional注解，如下：</p>   <div style="padding-top: 4px; padding-right: 5px; padding-bottom: 4px; padding-left: 4px; background-color: #eeeeee; width: 1080px; font-size: 13px; border: 1px solid #cccccc;">    <span style="color: #0000ff;">package</span>   <span style="color: #000000;">&nbsp;com.bluesky.spring.dao;<br /><br /></span>   <span style="color: #0000ff;">import</span>   <span style="color: #000000;">&nbsp;java.util.List;<br /><br /></span>   <span style="color: #0000ff;">import</span>   <span style="color: #000000;">&nbsp;org.hibernate.SessionFactory;<br /></span>   <span style="color: #0000ff;">import</span>   <span style="color: #000000;">&nbsp;org.springframework.beans.factory.annotation.Autowired;<br /></span>   <span style="color: #0000ff;">import</span>   <span style="color: #000000;">&nbsp;org.springframework.orm.hibernate3.support.HibernateDaoSupport;<br /></span>   <span style="color: #0000ff;">import</span>   <span style="color: #000000;">&nbsp;org.springframework.stereotype.Component;<br /><br /></span>   <span style="color: #0000ff;">import</span>   <span style="color: #000000;">&nbsp;com.bluesky.spring.domain.User;<br /><br />@Transactional<br />@Component(</span>   <span style="color: #000000;">&quot;</span>   <span style="color: #000000;">userDao</span>   <span style="color: #000000;">&quot;</span>   <span style="color: #000000;">)<br /></span>   <span style="color: #0000ff;">public</span>   <span style="color: #000000;">&nbsp;</span>   <span style="color: #0000ff;">class</span>   <span style="color: #000000;">&nbsp;UserDaoImpl&nbsp;</span>   <span style="color: #0000ff;">extends</span>   <span style="color: #000000;">&nbsp;HibernateDaoSupport&nbsp;</span>   <span style="color: #0000ff;">implements</span>   <span style="color: #000000;">&nbsp;UserDao {<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">public</span>   <span style="color: #000000;">&nbsp;List</span>   <span style="color: #000000;">&lt;</span>   <span style="color: #000000;">User</span>   <span style="color: #000000;">&gt;</span>   <span style="color: #000000;">&nbsp;listUsers() {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>   <span style="color: #0000ff;">return</span>   <span style="color: #000000;">&nbsp;</span>   <span style="color: #0000ff;">this</span>   <span style="color: #000000;">.getSession().createQuery(</span>   <span style="color: #000000;">&quot;</span>   <span style="color: #000000;">from User</span>   <span style="color: #000000;">&quot;</span>   <span style="color: #000000;">).list();<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;<img style="" src="http://www.blogjava.net/Images/dot.gif" alt="" /><br />}</span>   </div>   <div>   <br />  </div>   <div>   转载&nbsp;   <span style="color: #000000; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: normal; font-size: 12px;"><a href="http://www.blogjava.net/robbie/archive/2009/04/05/264003.html">http://www.blogjava.net/robbie/archive/2009/04/05/264003.html</a></span>   </div> </span></p>