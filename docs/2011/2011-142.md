---
date: 2011-06-08 10:31:17
title: Java图表解决方案：Jfreechart - 小何贝贝的技术空间 - 51CTO技术博客
---


转载 ：<a href="http://babyhe.blog.51cto.com/1104064/381128">Java图表解决方案：Jfreechart - 小何贝贝的技术空间 - 51CTO技术博客</a>.

<span style="color: #555555; font-family: 宋体, 'Arial Narrow', arial, serif; line-height: 28px; font-size: 14px;">
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;">为了创建一个可以在web浏览器上查看到图表一般有两种做法：第一种就是使用applet利用java本身对图形的支持来显示一个图表；第二 种就是直接在web服务器端生成好图表图片文件后发送给浏览器。第一种方式显然对于客户端要求太高，随着现在主流浏览器放弃对JAVA的支持后，这种方式 只适合一些局域网的应用，而对于因特网的环境就显得不太适合。因此我们下面将介绍一个JAVA的图表引擎JFreeChart用来产生基于WEB的图表。 <br style="padding: 0px; margin: 0px;" /> JFreeChart 项目简介 JFreeChart是开放源代码站点SourceForge.net上的一个JAVA项目，它主要用来各种各样的图表，这些图表包括：饼图、柱状图(普 通柱状图以及堆栈柱状图)、线图、区域图、分布图、混合图、甘特图以及一些仪表盘等等。这些不同式样的图表基本上可以满足目前的要求。 <br style="padding: 0px; margin: 0px;" /><strong style="padding: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" />二、JFreeChart获取。</strong> <br style="padding: 0px; margin: 0px;" /> JFreeChart 是JFreeChart公司在开源网站SourceForge.net上的一个项目，该公司的主要产品有如下： <br style="padding: 0px; margin: 0px;" /> 1.JFreeReport ：报表解决工具 <br style="padding: 0px; margin: 0px;" /> 2.JFreeChart:Java 图形解决方案（Application/Applet/Servlet/Jsp） <br style="padding: 0px; margin: 0px;" /> 3.JCommon ：JFreeReport和JFreeChart的公共类库 <br style="padding: 0px; margin: 0px;" /> 4.JFreeDesigner ：JFreeReport的报表设计工具 <br style="padding: 0px; margin: 0px;" /> 我们可以从jfree官方网站上获取最新版本和相关资料（但是jfree的document需要40美金才能获取）， <br style="padding: 0px; margin: 0px;" /> 获取地址：http://www.jfree.org/jfreechart/index.html（同时可以获得简明介绍） <br style="padding: 0px; margin: 0px;" /> 我们以当前最新版本：jfreechart-1.0.1.zip为例子进行说明。 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><strong style="padding: 0px; margin: 0px;">三、JFreeChart配置安装</strong> <br style="padding: 0px; margin: 0px;" /> 1 、解压jfreechart-1.0.1.zip.zip到指定位置，其中source是jfreechart的源码，jfreechart-1.0.1-demo.jar   是例子程序，可以先运行一下看看各种效果，就知道他的nb之处了。 <br style="padding: 0px; margin: 0px;" /> 2 、为了配置成功，我们需要关注的文件有如下三个： <br style="padding: 0px; margin: 0px;" /> 设置classpath。加入下面三个jar包。 <br style="padding: 0px; margin: 0px;" /> jfreechart-1.0.1.jar 、jcommon-1.0.0.jar、gnujaxp.jar <br style="padding: 0px; margin: 0px;" /> 加上第三个jar包有时web.xml会报错，把它去掉就好了。 <br style="padding: 0px; margin: 0px;" /> 至此jfreechart的配置就完成了，下面就可以进行jfreechart的开发了。这里值得提出的是jfreechart的类<br style="padding: 0px; margin: 0px;" /> 结构设计前后兼容性不是很好，不同版本的jfreechart中类库结构可能不一样，有时候可能需要查源码。如果是中文显示的时候可能依据观感需要改变源码的字体。 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><strong style="padding: 0px; margin: 0px;">四、JFreeChart功能介绍 </strong><br style="padding: 0px; margin: 0px;" /> JFreeChart 目前是最好的java图形解决方案，基本能够解决目前的图形方面的需求，主要包括如下几个方面：<br style="padding: 0px; margin: 0px;" /> pie   charts   (2D   and   3D) ：饼图（平面和立体） <br style="padding: 0px; margin: 0px;" /> bar   charts   (regular   and   stacked,   with   an   optional   3D   effect) ：柱状图 <br style="padding: 0px; margin: 0px;" /> line   and   area   charts ：曲线图 <br style="padding: 0px; margin: 0px;" /> scatter   plots   and   bubble   charts <br style="padding: 0px; margin: 0px;" /> time   series,   high/low/open/close   charts   and   candle   stick   charts ：时序图 <br style="padding: 0px; margin: 0px;" /> combination   charts ：复合图 <br style="padding: 0px; margin: 0px;" /> Pareto   charts <br style="padding: 0px; margin: 0px;" /> Gantt   charts ：甘特图 <br style="padding: 0px; margin: 0px;" /> wind   plots,   meter   charts   and   symbol   charts <br style="padding: 0px; margin: 0px;" /> wafer   map   charts <br style="padding: 0px; margin: 0px;" /> ( 态图表,饼图(二维和三维)   ,   柱状图   ( 水平,垂直),线图,点图,时间变化图,甘特图,   股票行情图,混和图,   温度计图,   刻度图等常用商用图表) <br style="padding: 0px; margin: 0px;" /> 图形可以导出成PNG和JPEG格式，同时还可以与PDF和EXCEL关联 <br style="padding: 0px; margin: 0px;" /> JFreeChart 核心类库介绍： <br style="padding: 0px; margin: 0px;" /> 研究jfreechart源码发现源码的主要由两个大的包组成：org.jfree.chart,org.jfree.data。其中前者主要与图形 <br style="padding: 0px; margin: 0px;" /> 本身有关，后者与图形显示的数据有关。具体研究如果大家有兴趣的话可以自己研究    。 <br style="padding: 0px; margin: 0px;" /> 核心类主要有： <br style="padding: 0px; margin: 0px;" /> org.jfree.chart.JFreeChart ：图表对象，任何类型的图表的最终表现形式都是在该对象进行一些属性的定制。JFreeChart引擎本身提供了一个工厂类用于创建不同类型的图表对象 <br style="padding: 0px; margin: 0px;" /> org.jfree.data.category.XXXDataSet: 数据集对象，用于提供显示图表所用的数据。根据不同类型的图表对应着很多类型的数据集对象类 <br style="padding: 0px; margin: 0px;" /> org.jfree.chart.plot.XXXPlot ：图表区域对象，基本上这个对象决定着什么样式的图表，创建该对象的时候需要Axis、Renderer以及数据集对象的支持 <br style="padding: 0px; margin: 0px;" /> org.jfree.chart.axis.XXXAxis ：用于处理图表的两个轴：纵轴和横轴 <br style="padding: 0px; margin: 0px;" /> org.jfree.chart.render.XXXRender ：负责如何显示一个图表对象 <br style="padding: 0px; margin: 0px;" /> org.jfree.chart.urls.XXXURLGenerator: 用于生成Web图表中每个项目的鼠标点击链接 <br style="padding: 0px; margin: 0px;" /> XXXXXToolTipGenerator: 用于生成图象的帮助提示，不同类型图表对应不同类型的工具提示类 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /> 个人感觉JFreeChart可以满足大部分图片创建的需要，美中不足的是：对字体的设置做的不够好，特别是使用中文的时候字体很不清晰。因为这个原因建议你自己去修改他的源代码，最好使用properties文件去设置字体.还有就是文档要钱所以要多花点时间去看源代码。或多上社区. <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><strong style="padding: 0px; margin: 0px;">五．开始开发 </strong><br style="padding: 0px; margin: 0px;" /> 对JfreeChart有了初步了解并做好准备工作之后，开始作例子程序试验。在这里我只介绍饼图的做法，而这张图采用不同的方式进行输出，其他类型的图片可以参考jfreechart提供的例子，做法都差不多。 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><span style="color: red; padding: 0px; margin: 0px;">1） 直接生成图片</span> <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;"> PieChartPicture { </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">static</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">void</span></strong></span><span style="padding: 0px; margin: 0px;"> main(String[] args) </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">{ </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> PieDataset dataset = getDataSet(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> JFreeChart chart = ChartFactory.createPieChart3D( </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 项目进度分布"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// chart title </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> dataset,</span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// data </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">,</span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// include legend </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">, </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">false</span></strong></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> ); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> PiePlot3D  plot=(PiePlot3D)chart.getPlot(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// 图片中显示百分比:默认方式 </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//plot.setLabelGenerator(new           StandardPieSectionLabelGenerator(StandardPieToolTipGenerator.DEFAULT_TOOLTIP_FORMAT)); </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// 图片中显示百分比:自定义方式，{0} 表示选项， {1} 表示数值， {2} 表示所占比例 ,小数点后两位 </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> plot.setLabelGenerator(</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> StandardPieSectionLabelGenerator(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"{0}={1}({2})"</span></span><span style="padding: 0px; margin: 0px;">, NumberFormat.getNumberInstance(), </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> DecimalFormat(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"0.00%"</span></span><span style="padding: 0px; margin: 0px;">))); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// 图例显示百分比:自定义方式， {0} 表示选项， {1} 表示数值， {2} 表示所占比例 </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> plot.setLegendLabelGenerator(</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> StandardPieSectionLabelGenerator(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"{0}={1}({2})"</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// 设置背景色为白色 </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">chart.setBackgroundPaint(Color.white); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// 指定图片的透明度(0.0-1.0) </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> plot.setForegroundAlpha(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">1</span></span><span style="padding: 0px; margin: 0px;">.0f); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// 指定显示的饼图上圆形(false)还椭圆形(true) </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">plot.setCircular(</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// 设置图标题的字体 </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">Font font = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> Font(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 黑体"</span></span><span style="padding: 0px; margin: 0px;">,Font.CENTER_BASELINE,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">20</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">TextTitle title = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> TextTitle(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 项目状态分布"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">title.setFont(font); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">chart.setTitle(title); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">FileOutputStream fos_jpg = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">try</span></strong></span><span style="padding: 0px; margin: 0px;"> { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> fos_jpg=</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> FileOutputStream(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"D:\\ 项目状态分布.jpg"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> ChartUtilities.writeChartAsJPEG(fos_jpg,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">100</span></span><span style="padding: 0px; margin: 0px;">,chart,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">640</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">480</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> fos_jpg.close(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">catch</span></strong></span><span style="padding: 0px; margin: 0px;"> (Exception e) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> } </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">private</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">static</span></strong></span><span style="padding: 0px; margin: 0px;"> PieDataset getDataSet() { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">DefaultPieDataset dataset = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> DefaultPieDataset(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">dataset.setValue(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 市场前期"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> Double(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">10</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">dataset.setValue(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 立项"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> Double(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">15</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">dataset.setValue(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 计划"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> Double(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">10</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">dataset.setValue(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 需求与设计"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> Double(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">10</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">dataset.setValue(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 执行控制"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> Double(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">35</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">dataset.setValue(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 收尾"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> Double(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">10</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">dataset.setValue(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 运维"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> Double(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">10</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">return</span></strong></span><span style="padding: 0px; margin: 0px;"> dataset; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><span style="color: red; padding: 0px; margin: 0px;">2) 采用servlet和struts的action方式输出 </span><br style="padding: 0px; margin: 0px;" />采用这种方式输出，不用生成图片。 <br style="padding: 0px; margin: 0px;" />A ．servlet输出 <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;"> PieByServlet </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">extends</span></strong></span><span style="padding: 0px; margin: 0px;"> HttpServlet{ </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">void</span></strong></span><span style="padding: 0px; margin: 0px;"> service(ServletRequest req, ServletResponse res) </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">throws</span></strong></span><span style="padding: 0px; margin: 0px;"> ServletException, IOException </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">{ </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> res.setContentType(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"image/jpeg"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> PieDataset dataset = getDataSet(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> JFreeChart chart = ChartFactory.createPieChart3D( </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 水果饼图"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// chart title </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> dataset,</span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// data </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// include legend </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">, </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">false</span></strong></span><span style="padding: 0px; margin: 0px;"> ); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//设置图表属性 </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// 输出图片 </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> ChartUtilities.writeChartAsJPEG(res.getOutputStream(),</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">100</span></span><span style="padding: 0px; margin: 0px;">,chart,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">800</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">600</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" />B ．struts的action方式输出 <br style="padding: 0px; margin: 0px;" />只将这条语句加上try catch即可，并返回null。 <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">try</span></strong></span><span style="padding: 0px; margin: 0px;">{ </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">ChartUtilities.writeChartAsJPEG(response.getOutputStream(),</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">100</span></span><span style="padding: 0px; margin: 0px;">,chart,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">800</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">600</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> } </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">catch</span></strong></span><span style="padding: 0px; margin: 0px;"> (Exception e) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">return</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">; </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />其实采用这两种方式与生成图片的方式改动并不大 <br style="padding: 0px; margin: 0px;" />加上语句response.setContentType("image/jpeg"); <br style="padding: 0px; margin: 0px;" />ChartUtilities.writeChartAsJPEG(new FileOutputStream("D:\\ 项目状态分布.jpg");,100,chart,640,480,null); <br style="padding: 0px; margin: 0px;" />文件流改成response的输出流就可以了 <br style="padding: 0px; margin: 0px;" />hartUtilities.writeChartAsJPEG(response.getOutputStream(),100,chart,800,600,null); <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><span style="color: red; padding: 0px; margin: 0px;">3）jsp＋servlet＋javabean方式</span> <br style="padding: 0px; margin: 0px;" />1. Create ChartViewer servlet <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;"> ChartViewer </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">extends</span></strong></span><span style="padding: 0px; margin: 0px;"> HttpServlet { </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">void</span></strong></span><span style="padding: 0px; margin: 0px;"> init() </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">throws</span></strong></span><span style="padding: 0px; margin: 0px;"> ServletException { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//Process the HTTP Get request </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">void</span></strong></span><span style="padding: 0px; margin: 0px;"> doGet(HttpServletRequest request, HttpServletResponse response) </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">throws</span></strong></span><span style="padding: 0px; margin: 0px;"> ServletException, IOException { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// get the chart from session </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">HttpSession session = request.getSession(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">BufferedImage chartImage = (BufferedImage) session.getAttribute(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"chartImage"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// set the content type so the browser can see this as a picture </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">response.setContentType(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"image/png"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// send the picture </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">PngEncoder encoder = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> PngEncoder(chartImage, </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">false</span></strong></span><span style="padding: 0px; margin: 0px;">, </span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">0</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">9</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">response.getOutputStream().write(encoder.pngEncode()); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//Process the HTTP Post request </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">void</span></strong></span><span style="padding: 0px; margin: 0px;"> doPost(HttpServletRequest request, HttpServletResponse response) </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">throws</span></strong></span><span style="padding: 0px; margin: 0px;"> ServletException, IOException { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">doGet(request, response); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//Process the HTTP Put request </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">void</span></strong></span><span style="padding: 0px; margin: 0px;"> doPut(HttpServletRequest request, HttpServletResponse response) </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">throws</span></strong></span><span style="padding: 0px; margin: 0px;"> ServletException, IOException { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//Clean up resources </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">void</span></strong></span><span style="padding: 0px; margin: 0px;"> destroy() { } </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />2. Create a servlet map in web.xml <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px;">&lt;?xml version=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"1.0"</span></span><span style="padding: 0px; margin: 0px;"> encoding=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"UTF-8"</span></span><span style="padding: 0px; margin: 0px;">?&gt; </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;web-app&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> &lt;servlet&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> &lt;servlet-name&gt;ChartViewer&lt;/servlet-name&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> &lt;servlet-</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;">&gt;myapp.webwork.servlets.ChartViewer&lt;/servlet-</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;">&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;/servlet&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;servlet-mapping&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;servlet-name&gt;ChartViewer&lt;/servlet-name&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;url-pattern&gt;/servlet/ChartViewer&lt;/url-pattern&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;/servlet-mapping&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;/web-app&gt; </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />3. Create a chart in a java bean (Pie3DDemo.java) <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;"> Pie3DDemo { </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">private</span></strong></span><span style="padding: 0px; margin: 0px;"> DefaultPieDataset getDataset() { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// categories... </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">String[] section = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> String[] { </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Jan"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Feb"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Mar"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Apr"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"May"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Jun"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Jul"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Aug"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Sep"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Oct"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Nov"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Dec"</span></span><span style="padding: 0px; margin: 0px;"> }; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// data... </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">double</span></strong></span><span style="padding: 0px; margin: 0px;">[] data = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">double</span></strong></span><span style="padding: 0px; margin: 0px;">[section.length]; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">for</span></strong></span><span style="padding: 0px; margin: 0px;"> (</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">int</span></strong></span><span style="padding: 0px; margin: 0px;"> i = </span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">0</span></span><span style="padding: 0px; margin: 0px;">; i &lt; data.length; i++) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> data[i] = </span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">10</span></span><span style="padding: 0px; margin: 0px;"> + (Math.random() * </span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">10</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// create the dataset... </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">DefaultPieDataset dataset = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> DefaultPieDataset(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">for</span></strong></span><span style="padding: 0px; margin: 0px;"> (</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">int</span></strong></span><span style="padding: 0px; margin: 0px;"> i = </span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">0</span></span><span style="padding: 0px; margin: 0px;">; i &lt; data.length; i++) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> dataset.setValue(section[i], data[i]); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">return</span></strong></span><span style="padding: 0px; margin: 0px;"> dataset; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> String getChartViewer(HttpServletRequest request, HttpServletResponse response) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> DefaultPieDataset dataset = getDataset(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// create the chart... </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> JFreeChart chart = ChartFactory.createPie3DChart( </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Pie3D Chart Demo"</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// chart title </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> dataset, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// data </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// include legend </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">, </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">false</span></strong></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> ); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// set the background color for the chart... </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">chart.setBackgroundPaint(Color.cyan); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">PiePlot plot = (PiePlot) chart.getPlot(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">plot.setNoDataMessage(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"No data available"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// set drilldown capability... </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> plot.setURLGenerator(</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> StandardPieURLGenerator(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Bar3DDemo.jsp"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"section"</span></span><span style="padding: 0px; margin: 0px;">)); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">plot.setLabelGenerator(</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// OPTIONAL CUSTOMISATION COMPLETED. </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">ChartRenderingInfo info = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">HttpSession session = request.getSession(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">try</span></strong></span><span style="padding: 0px; margin: 0px;"> { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//Create RenderingInfo object </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> response.setContentType(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"text/html"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> info = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> ChartRenderingInfo(</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> StandardEntityCollection()); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> BufferedImage chartImage = chart.createBufferedImage(</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">640</span></span><span style="padding: 0px; margin: 0px;">, </span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">400</span></span><span style="padding: 0px; margin: 0px;">, info); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// putting chart as BufferedImage in session, </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// thus making it available for the image reading action Action. </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">session.setAttribute(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"chartImage"</span></span><span style="padding: 0px; margin: 0px;">, chartImage); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">PrintWriter writer = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> PrintWriter(response.getWriter()); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">ChartUtilities.writeImageMap(writer, </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"imageMap"</span></span><span style="padding: 0px; margin: 0px;">, info); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">writer.flush(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">catch</span></strong></span><span style="padding: 0px; margin: 0px;"> (Exception e) { } </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">String pathInfo = </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"http://"</span></span><span style="padding: 0px; margin: 0px;">; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">pathInfo += request.getServerName(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">int</span></strong></span><span style="padding: 0px; margin: 0px;"> port = request.getServerPort(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">pathInfo += </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">":"</span></span><span style="padding: 0px; margin: 0px;">+String.valueOf(port); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">pathInfo += request.getContextPath(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">String chartViewer = pathInfo + </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"/servlet/ChartViewer"</span></span><span style="padding: 0px; margin: 0px;">; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">return</span></strong></span><span style="padding: 0px; margin: 0px;"> chartViewer; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />6. 页面 <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px;"> </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;html&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;head&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;title&gt;Pie Chart Demo&lt;/title&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;/head&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;jsp:useBeanid=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"myChart"</span></span><span style="padding: 0px; margin: 0px;">scope=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"session"</span></span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;">=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"myapp.webwork.beans.Pie3DDemo"</span></span><span style="padding: 0px; margin: 0px;"> /&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;body&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;h2&gt;Pie Chart Demo&lt;/h2&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;%String chartViewer = myChart.getChartViewer(request, response);%&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;img src=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"&lt;%=chartViewer%&gt;"</span></span><span style="padding: 0px; margin: 0px;"> border=</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">0</span></span><span style="padding: 0px; margin: 0px;"> usemap=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"#imageMap"</span></span><span style="padding: 0px; margin: 0px;">&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;/body&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;/html&gt; </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><span style="color: red; padding: 0px; margin: 0px;">4）采用工具类ChartUtil和DisplayChart（jfreechart的servlet）输出</span> <br style="padding: 0px; margin: 0px;" />我用了上面的几个方法输出图片，发现页面里只能输出一个图片， <br style="padding: 0px; margin: 0px;" />不过下面的方法可以输出多个图片,而且是几种方式中最简单的一个，推荐使用。 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />这种方式和上面的三种比较类似，是将javabean里的生成图片的方法写的一个工具类ChartUtil里面。 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />1 ．添加工具类ChartUtil <br style="padding: 0px; margin: 0px;" />public class ChartUtil { <br style="padding: 0px; margin: 0px;" />//  产生时间序列图，返回图片名称 <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">static</span></strong></span><span style="padding: 0px; margin: 0px;"> String generatePieChart(DefaultPieDataset dataset,String title,</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">int</span></strong></span><span style="padding: 0px; margin: 0px;"> width,</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">int</span></strong></span><span style="padding: 0px; margin: 0px;"> height,HttpSession session, PrintWriter pw) { </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">String filename = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">try</span></strong></span><span style="padding: 0px; margin: 0px;"> { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">if</span></strong></span><span style="padding: 0px; margin: 0px;"> (session != </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">) </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">ChartDeleter deleter = (ChartDeleter)session.getAttribute(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"JFreeChart_Deleter"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> session.removeAttribute(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"JFreeChart_Deleter"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> session.setAttribute(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"JFreeChart_Deleter"</span></span><span style="padding: 0px; margin: 0px;">, deleter); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">JFreeChart chart = ChartFactory.createPieChart3D( </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">title, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// chart title </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">dataset, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// data </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">, </span><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">// include legend </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">, </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">false</span></strong></span><span style="padding: 0px; margin: 0px;"> ); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//  Write the chart image to the temporary directory </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">ChartRenderingInfo info = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> ChartRenderingInfo(</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> StandardEntityCollection()); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//If the last parameter is null, the chart is a "one time"-chart and will be deleted after the first serving. </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//If the last parameter is a session object, the chart remains until session time out. </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">filename = ServletUtilities.saveChartAsPNG(chart, width, height, info, session); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="comment" style="padding: 0px; margin: 0px;"><span style="color: #008200; padding: 0px; margin: 0px;">//  Write the image map to the PrintWriter </span></span><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> ChartUtilities.writeImageMap(pw, filename, info,</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> pw.flush(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">catch</span></strong></span><span style="padding: 0px; margin: 0px;"> (Exception e) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> System.out.println(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Exception - "</span></span><span style="padding: 0px; margin: 0px;"> + e.toString()); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> e.printStackTrace(System.out); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> filename = </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"picture_error.png"</span></span><span style="padding: 0px; margin: 0px;">; } </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">return</span></strong></span><span style="padding: 0px; margin: 0px;"> filename; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />2、在action里统计数据，设置好数据集dataset。传到页面 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />3、 在页面里取出 <br style="padding: 0px; margin: 0px;" />DefaultPieDataset piedataset=(DefaultPieDataset)request.getAttribute("piedataset"); <br style="padding: 0px; margin: 0px;" />// 用ChartUtil工具类产生图片 <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px;">String p = ChartUtil.generatePieChart(piedataset,</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">" 项目收支线图"</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">500</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">300</span></span><span style="padding: 0px; margin: 0px;">,</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">null</span></strong></span><span style="padding: 0px; margin: 0px;">, </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> PrintWriter(out)); </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">String p1 = request.getContextPath() + </span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"/servlet/DisplayChart?filename="</span></span><span style="padding: 0px; margin: 0px;"> + p; </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" />通过以下方式输出 <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px;">&lt;td&gt;&lt;img src=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"&lt;%= p1 %&gt;"</span></span><span style="padding: 0px; margin: 0px;"> width=</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">500</span></span><span style="padding: 0px; margin: 0px;"> height=</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">300</span></span><span style="padding: 0px; margin: 0px;"> border=</span><span class="number" style="padding: 0px; margin: 0px;"><span style="color: #c00000; padding: 0px; margin: 0px;">0</span></span><span style="padding: 0px; margin: 0px;"> usemap=</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"#&lt;%= p %&gt;"</span></span><span style="padding: 0px; margin: 0px;">&gt;&lt;/td&gt; </span></span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />4、在web.xml中添加 <br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px;">&lt;servlet&gt; </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> &lt;servlet-name&gt;DisplayChart&lt;/servlet-name&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> &lt;servlet-</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;">&gt;org.jfree.chart.servlet.DisplayChart&lt;/servlet-</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;">&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;/servlet&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;servlet-mapping&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> &lt;servlet-name&gt;DisplayChart&lt;/servlet-name&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> &lt;url-pattern&gt;/servlet/DisplayChart&lt;/url-pattern&gt; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">&lt;/servlet-mapping&gt; </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><span style="color: red; padding: 0px; margin: 0px;">5） ApplicationFrame 方式 </span><br style="padding: 0px; margin: 0px;" /></p>

<div class="dp-highlighter" style="padding: 0px; margin: 0px;">
<div class="bar" style="padding: 0px; margin: 0px;">
<div class="tools" style="padding: 0px; margin: 0px;">Java代码 <a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" title="复制代码" href="http://ltc603.javaeye.com/blog/30207#"><img style="vertical-align: top; padding: 0px; margin: 0px; border: initial none initial;" src="http://ltc603.javaeye.com/images/icon_copy.gif" alt="复制代码" /></a></div>
</div>
<ol class="dp-j" style="padding: 0px; margin: 0px;">
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">class</span></strong></span><span style="padding: 0px; margin: 0px;"> PieChartDemo1 </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">extends</span></strong></span><span style="padding: 0px; margin: 0px;"> ApplicationFrame { </span></span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> PieChartDemo1(String title) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">super</span></strong></span><span style="padding: 0px; margin: 0px;">(title); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">setContentPane(createDemoPanel()); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">private</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">static</span></strong></span><span style="padding: 0px; margin: 0px;"> JFreeChart createChart(PieDataset dataset) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">JFreeChart chart = ChartFactory.createPieChart( </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">....... </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">return</span></strong></span><span style="padding: 0px; margin: 0px;"> chart; </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">static</span></strong></span><span style="padding: 0px; margin: 0px;"> JPanel createDemoPanel() { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">JFreeChart chart = createChart(createDataset()); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">return</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> ChartPanel(chart); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;"> </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">public</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">static</span></strong></span><span style="padding: 0px; margin: 0px;"> </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">void</span></strong></span><span style="padding: 0px; margin: 0px;"> main(String[] args) { </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">PieChartDemo1 demo = </span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">new</span></strong></span><span style="padding: 0px; margin: 0px;"> PieChartDemo1(</span><span class="string" style="padding: 0px; margin: 0px;"><span style="color: #0000ff; padding: 0px; margin: 0px;">"Pie Chart Demo 1"</span></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">demo.pack(); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">RefineryUtilities.centerFrameOnScreen(demo); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">demo.setVisible(</span><span class="keyword" style="padding: 0px; margin: 0px;"><strong style="padding: 0px; margin: 0px;"><span style="color: #7f0055; padding: 0px; margin: 0px;">true</span></strong></span><span style="padding: 0px; margin: 0px;">); </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
	<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 20px; list-style-type: none; list-style-position: initial; list-style-image: initial; padding: 0px;"><span style="padding: 0px; margin: 0px;">} </span></li>
</ol>
</div>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><strong style="padding: 0px; margin: 0px;">六. 可参考资料与网址 </strong><br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />官方网站 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />[url]http://www.jfree.org/jfreechart/index.html [/url] <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />官方论坛 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" /><a style="color: #2d3236; text-decoration: none; padding: 0px; margin: 0px;" href="http://www.jfree.org/phpBB2/index.php" target="_blank"><span style="color: #e9650e; padding: 0px; margin: 0px;">http://www.jfree.org/phpBB2/index.php</span></a> <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />API 文档 <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />[url]http://www.jfree.org/jfreechart/api/gjdoc/index.html [/url] <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />中文API <br style="padding: 0px; margin: 0px;" /><br style="padding: 0px; margin: 0px;" />[url]http://blog.sina.com.cn/u/405da78d010000ap [/url] <br style="padding: 0px; margin: 0px;" />图片：</p>
<p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; margin: 0px;"><img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/PieChartDemo1-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/PieChart3DDemo1-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/PriceVolumeDemo1-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/PopulationChartDemo1-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/DifferenceChartDemo2-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/DualAxisDemo1-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/ScatterPlotDemo1-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/XYBarChartDemo1-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/HistogramDemo1-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/DeviationRendererDemo2-254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/XYSplineRendererDemo1a_254.png" alt="" /> <img style="vertical-align: top; width: auto; height: auto; padding: 0px; margin: 0px; border: initial none initial;" src="http://www.jfree.org/jfreechart/images/DialPlotDemo2a_254.png" alt="" /></p>

</span>