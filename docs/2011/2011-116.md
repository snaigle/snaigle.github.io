---
date: 2011-03-11
title: 话说 fat32 和ntfs下 单文件夹下 可生成文件的数量限制
---


<p>昨天在项目中遇到一个问题，这是在对网站静态化时出的问题，系统报了 File not found , 上层error 是， file or directory</p> <p>can't not create</p> <p>&nbsp;</p> <p>我很奇怪，反复测试了两遍一直是这个问题，突然想到是不是文件夹下的文件数量限制有问题。</p> <p>我立刻写了一个小程序进行测试，果然在fat32下，创建到 16000个文件时 就抛出了异常。</p> <p>这跟文件名的长短有关系，短文件名大概能创建到30000多个。</p> <p>我又好奇的测试了一下ntfs下的情况，</p> <p>下面 公布测试结果：</p> <p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; fat32 /ntfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 文件名长度 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;创建文件数</p> <p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; fat32 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 33000 </p> <p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; fat32 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 16 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;20000</p> <p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;fat32 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;32 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 16000</p> <p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; nfts &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;400,000 &nbsp; &nbsp; (等不下去了)</p> <p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; nfts &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;32 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;247654 (等不下去了)</p> <p>&nbsp;</p> <p>结论: 看来写程序还要注意os和硬件的影响</p>