<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>正则表达式基础</title>
  
    <meta name="author" content="盒子">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css" type="text/css" rel="stylesheet" media="all">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="/assets/twitter/javascripts/qrcode.js"></script>
 

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="/">韭菜盒子</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
     
              


   <li class="nav-item">
        <a class="nav-link" href="/archive">归档</a>
      </li>


      
              


   <li class="nav-item">
        <a class="nav-link" href="/tags">标签</a>
      </li>


      
              


   <li class="nav-item">
        <a class="nav-link" href="/categories">分类</a>
      </li>


      
              


   <li class="nav-item">
        <a class="nav-link" href="/pages">分页</a>
      </li>


      
              


   <li class="nav-item">
        <a class="nav-link" href="/about">关于我</a>
      </li>


      
    </ul>
  </div>
</nav>
    <div class="container">
        <div class="page-header">
  <h1>正则表达式基础 </h1>
</div>

<div class="row">
  <div class="span8">
    <p> </p> <p>元字符:</p> <p>/b 代表着单词的开头或结尾，也就是单词的分界处.如果要精确地查找hi这个单词的话，我们应该使用/bhi/b.</p> <p>.是另一个元字符，匹配除了换行符以外的任意字符,*同样是元字符，它指定*前边的内容可以重复任意次以使整个表达式得到匹配。</p> <p>&nbsp;</p> <p>.*连在一起就意味着任意数量的不包含换行的字符。</p> <p>/d是一个新的元字符，匹配任意的数字,0/d/d-/d/d/d/d/d/d/d/d也就是中国的电话号码.为了避免那么多烦人的重复，我们也可以这样写这个表达式：0/d{2}-/d{8}。</p> <p>/s匹配任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格等。/w匹配字母或数字或下划线或汉字。</p> <p>/b/w{6}/b 匹配刚好6个字母/数字的单词。</p> <p>字符转义：使用/来取消这些字符的特殊意义。因此，你应该使用/.和/*。当然，要查找/本身，你也得用//。</p> <p>&nbsp;&nbsp;代码 &nbsp; &nbsp; 说明&nbsp;</p> <p>&nbsp;&nbsp; . &nbsp;匹配除换行符以外的任意字符&nbsp;</p> <p>&nbsp;&nbsp;/w &nbsp;匹配字母或数字或下划线或汉字&nbsp;</p> <p>&nbsp;&nbsp;/s &nbsp;匹配任意的空白符&nbsp;</p> <p>&nbsp;&nbsp;/d &nbsp;匹配数字&nbsp;</p> <p>&nbsp;&nbsp;/b &nbsp;匹配单词的开始或结束&nbsp;</p> <p>&nbsp;&nbsp;^ &nbsp; 匹配字符串的开始&nbsp;</p> <p>&nbsp;&nbsp;$ &nbsp; 匹配字符串的结束</p> <p>重复：</p> <p>常用的限定符&nbsp;</p> <p>代码/语法 &nbsp;说明&nbsp;</p> <p>&nbsp;&nbsp; * &nbsp;重复零次或更多次&nbsp;</p> <p>&nbsp;&nbsp; + &nbsp;重复一次或更多次&nbsp;</p> <p>&nbsp;&nbsp; ? &nbsp;重复零次或一次&nbsp;</p> <p>&nbsp;&nbsp;{n} 重复n次&nbsp;</p> <p>&nbsp;{n,} 重复n次或更多次&nbsp;</p> <p>{n,m} 重复n到m次</p> <p>要想查找数字，字母或数字，你只需要在中括号里列出它们就行了，像[aeiou]就匹配任何一个元音字母，[.?!]匹配标点符号(.或?或!)</p> <p>反义：</p> <p>&nbsp;常用的反义代码&nbsp;</p> <p>&nbsp;代码/语法 &nbsp; 说明&nbsp;</p> <p>&nbsp;&nbsp; /W &nbsp; 匹配任意不是字母，数字，下划线，汉字的字符&nbsp;</p> <p>&nbsp;&nbsp; /S &nbsp; 匹配任意不是空白符的字符&nbsp;</p> <p>&nbsp;&nbsp; /D &nbsp; 匹配任意非数字的字符&nbsp;</p> <p>&nbsp;&nbsp; /B &nbsp; 匹配不是单词开头或结束的位置&nbsp;</p> <p>&nbsp;[^x] &nbsp; 匹配除了x以外的任意字符&nbsp;</p> <p>&nbsp;&nbsp; &nbsp; &nbsp;[^aeiou] &nbsp; 匹配除了aeiou这几个字母以外的任意字符</p> <p>&nbsp;</p> <p>替换：</p> <p>&nbsp;&nbsp; 正则表达式里的替换指的是有几种规则，如果满足其中任意一种规则都应该当成匹配，具体方法是用|把不同的规则分隔开。</p> <p>&nbsp;&nbsp; 0/d{2}-/d{8}|0/d{3}-/d{7}这个表达式能匹配两种以连字号分隔的电话号码：一种是三位区号，8位本地号(如010-12345678)，一种是4位区号，7位本地号(0376-2233445)。</p> <p>&nbsp;&nbsp; /(0/d{2}/)[- ]?/d{8}|0/d{2}[- ]?/d{8}这个表达式匹配3位区号的电话号码，其中区号可以用小括号括起来，也可以不用，区号与本地号间可以用连字号或空格间隔，也可以没有间隔。你可以试试用替换|把这个表达式扩展成也支持4位区号的。</p> <p>&nbsp;&nbsp; /d{5}-/d{4}|/d{5}这个表达式用于匹配美国的邮政编码。美国邮编的规则是5位数字，或者用连字号间隔的9位数字。之所以要给出这个例子是因为它能说明一个问题：使用替换时，顺序是很重要的。如果你把它改成/d{5}|/d{5}-/d{4}的话，那么就只会匹配5位的邮编(以及9位邮编的前5位)。原因是匹配替换时，将会从左到右地测试每个分枝条件，如果满足了某个分枝的话，就不会去管其它的替换条件了。</p> <p>分组：</p> <p>如果想要重复一个字符串又该怎么办？你可以用小括号来指定子表达式(也叫做分组)，然后你就可以指定这个子表达式的重复次数了。</p> <p>&nbsp;&nbsp; &nbsp; (/d{1,3}/.){3}/d{1,3}是一个简单的IP地址匹配表达式。要理解这个表达式，请按下列顺序分析它：/d{1,3}匹配1到3位的数字，(/d{1,3}/.}{3}匹配三位数字加上一个英文句号(这个整体也就是这个分组)重复3次，最后再加上一个一到三位的数字(/d{1,3})。不幸的是，它也将匹配256.300.888.999这种不可能存在的IP地址(IP地址中每个数字都不能大于255)。如果能使用算术比较的话，或许能简单地解决这个问题，但是正则表达式中并不提供关于数学的任何功能，所以只能使用冗长的分组，选择，字符类来描述一个正确的IP地址：((2[0-4]/d|25[0-5]|[01]?/d/d?)/.){3}(2[0-4]/d|25[0-5]|[01]?/d/d?)。</p> <p>后向引用：</p> <p>后向引用用于重复搜索前面某个分组匹配的文本。例如，/1代表分组1匹配的文本。难以理解？请看示例：</p> <p>/b(/w+)/b/s+/1/b可以用来匹配重复的单词，像go go, kitty kitty。首先是一个单词，也就是单词开始处和结束处之间的多于一个的字母或数字(/b(/w+)/b)，然后是1个或几个空白符(/s+，最后是前面匹配的那个单词(/1)。</p> <p>懒惰限定符&nbsp;</p> <p>*? 重复任意次，但尽可能少重复&nbsp;</p> <p>+? 重复1次或更多次，但尽可能少重复&nbsp;</p> <p>?? 重复0次或1次，但尽可能少重复&nbsp;</p> <p>{n,m}? 重复n到m次，但尽可能少重复&nbsp;</p> <p>{n,}? 重复n次以上，但尽可能少重复</p> <p>位置指定:</p> <p>&nbsp;</p> <p>接下来的四个用于查找在某些内容(但并不包括这些内容)之前或之后的东西，也就是说它们用于指定一个位置，就像/b,^,$那样，因此它们也被称为零宽断言。最好还是拿例子来说明吧：</p> <p>(?=exp)也叫零宽先行断言，它匹配文本中的某些位置，这些位置的后面能匹配给定的后缀exp。比如/b/w+(?=ing/b)，匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如果在查找I'm singing while you're dancing.时，它会匹配sing和danc。</p> <p>(?&lt;=exp)也叫零宽后行断言，它匹配文本中的某些位置，这些位置的前面能给定的前缀匹配exp。比如(?&lt;=/bre)/w+/b会匹配以re开头的单词的后半部分(除了re以外的部分)，例如在查找reading a book时，它匹配ading。</p> <p>假如你想要给一个很长的数字中每三位间加一个逗号(当然是从右边加起了)，你可以这样查找需要在前面和里面添加逗号的部分：((?&lt;=/d)/d{3})*/b。请仔细分析这个表达式，它可能不像你第一眼看出来的那么简单。</p> <p>下面这个例子同时使用了前缀和后缀：(?&lt;=/s)/d+(?=/s)匹配以空白符间隔的数字(再次强调，不包括这些空白符)。</p> <p>负向位置指定:</p> <p>&nbsp;</p> <p>前面我们提到过怎么查找不是某个字符或不在某个字符类里的字符的方法(反义)。但是如果我们只是想要确保某个字符没有出现，但并不想去匹配它时怎么办？例如，如果我们想查找这样的单词--它里面出现了字母q,但是q后面跟的不是字母u,我们可以尝试这样：</p> <p>/b/w*q[^u]/w*/b匹配包含后面不是字母u的字母q的单词。但是如果多做测试(或者你思维足够敏锐，直接就观察出来了)，你会发现，如果q出现在单词的结尾的话，像Iraq,Benq，这个表达式就会出错。这是因为[^u]总是匹配一个字符，所以如果q是单词的最后一个字符的话，后面的[^u]将会匹配q后面的单词分隔符(可能是空格，或者是句号或其它的什么)，后面的/w+/b将会匹配下一个单词，于是/b/w*q[^u]/w*/b就能匹配整个Iraq fighting。负向位置指定能解决这样的问题，因为它只匹配一个位置，并不消费任何字符。现在，我们可以这样来解决这个问题：/b/w*q(?!u)/w*/b。</p> <p>零宽负向先行断言(?!exp)，只会匹配后缀exp不存在的位置。/d{3}(?!/d)匹配三位数字，而且这三位数字的后面不能是数字。</p> <p>同理，我们可以用(?&lt;!exp),零宽负向后行断言来查找前缀exp不存在的位置：(?&lt;![a-z])/d{7}匹配前面不是小写字母的七位数字(实验时发现错误？注意你的“区分大小写”先项是否选中)。</p> <p>一个更复杂的例子：(?&lt;=&lt;(/w+)&gt;).*(?=&lt;///1&gt;)匹配不包含属性的简单HTML标签内里的内容。(&lt;?(/w+)&gt;)指定了这样的前缀：被尖括号括起来的单词(比如可能是&lt;b&gt;)，然后是.*(任意的字符串),最后是一个后缀(?=&lt;///1&gt;)。注意后缀里的//，它用到了前面提过的字符转义；/1则是一个反向引用，引用的正是捕获的第一组，前面的(/w+)匹配的内容，这样如果前缀实际上是&lt;b&gt;的话，后缀就是&lt;/b&gt;了。整个表达式匹配的是&lt;b&gt;和&lt;/b&gt;之间的内容(再次提醒，不包括前缀和后缀本身)。</p> <p>注释:</p> <p>小括号的另一种用途是能过语法(?#comment)来包含注释。例如：2[0-4]/d(?#200-249)|25[0-5](?#250-255)|[01]?/d/d?(?#0-199)。</p> <p>要包含注释的话，最好是启用“忽略模式里的空白符”选项，这样在编写表达式时能任意的添加空格，Tab，换行，而实际使用时这些都将被忽略。启用这个选项后，在#后面到这一行结束的所有文本都将被当成注释忽略掉。</p> <p>例如，我们可以前面的一个表达式写成这样：</p> <p>&nbsp;&nbsp; &nbsp; &nbsp;(?&lt;= &nbsp; &nbsp;# 查找前缀，但不包含它</p> <p>&nbsp;&nbsp; &nbsp; &nbsp;&lt;(/w+)&gt; # 查找尖括号括起来的字母或数字(标签)</p> <p>&nbsp;&nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; # 前缀结束</p> <p>&nbsp;&nbsp; &nbsp; &nbsp;.* &nbsp; &nbsp; &nbsp;# 匹配任意文本</p> <p>&nbsp;&nbsp; &nbsp; &nbsp;(?= &nbsp; &nbsp; # 查找后缀，但不包含它</p> <p>&nbsp;&nbsp; &nbsp; &nbsp;&lt;///1&gt; &nbsp;# 查找尖括号括起来的内容：前面是一个&quot;/&quot;，后面是先前捕获的标签</p> <p>&nbsp;&nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; # 后缀结束</p> <p>&nbsp;</p> <p>贪婪与懒惰:</p> <p>当正则表达式中包含能接受重复的限定符(指定数量的代码，例如*,{5,12}等)时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能多的字符。考虑这个表达式：a.*b，它将会匹配最长的以a开始，以b结束的字符串。如果用它来搜索aabab的话，它会匹配整个字符串aabab。这被称为贪婪匹配。</p> <p>有时，我们更需要懒惰匹配，也就是匹配尽可能少的字符。前面给出的限定符都可以被转化为懒惰匹配模式，只要在它后面加上一个问号?。这样.*?就意味着匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复。现在看看懒惰版的例子吧：</p> <p>a.*?b匹配最短的，以a开始，以b结束的字符串。如果把它应用于aabab的话，它会匹配aab和ab（为什么第一个匹配是aab而不是ab？简单地说，最先开始的区配最有最大的优先权——The Match That Begins Earliest Wins）。</p> <p>表5.懒惰限定符 *? 重复任意次，但尽可能少重复&nbsp;</p> <p>+? 重复1次或更多次，但尽可能少重复&nbsp;</p> <p>?? 重复0次或1次，但尽可能少重复&nbsp;</p> <p>{n,m}? 重复n到m次，但尽可能少重复&nbsp;</p> <p>{n,}? 重复n次以上，但尽可能少重复&nbsp;</p> <p>-------------------------------------------------------</p> <p>下面是一些常用的正则表达式:</p> <p>匹配中文字符的正则表达式： [/u4e00-/u9fa5]</p> <p>评注：匹配中文还真是个头疼的事，有了这个表达式就好办了</p> <p>匹配双字节字符(包括汉字在内)：[^/x00-/xff]</p> <p>评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1）</p> <p>匹配空白行的正则表达式：/n/s*/r</p> <p>评注：可以用来删除空白行</p> <p>匹配HTML标记的正则表达式：&lt;(/S*?)[^&gt;]*&gt;.*?&lt;//1&gt;|&lt;.*? /&gt;</p> <p>评注：网上流传的版本太糟糕，上面这个也仅仅能匹配部分，对于复杂的嵌套标记依旧无能为力</p> <p>匹配首尾空白字符的正则表达式：^/s*|/s*$</p> <p>评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式</p> <p>匹配Email地址的正则表达式：/w+([-+.]/w+)*@/w+([-.]/w+)*/./w+([-.]/w+)*</p> <p>评注：表单验证时很实用</p> <p>匹配网址URL的正则表达式：[a-zA-z]+://[^/s]*</p> <p>评注：网上流传的版本功能很有限，上面这个基本可以满足需求</p> <p>匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$</p> <p>评注：表单验证时很实用</p> <p>匹配国内电话号码：/d{3}-/d{8}|/d{4}-/d{7}</p> <p>评注：匹配形式如 0511-4405222 或 021-87888822</p> <p>匹配腾讯QQ号：[1-9][0-9]{4,}</p> <p>评注：腾讯QQ号从10000开始</p> <p>匹配中国邮政编码：[1-9]/d{5}(?!/d)</p> <p>评注：中国邮政编码为6位数字</p> <p>匹配身份证：/d{15}|/d{18}</p> <p>评注：中国的身份证为15位或18位</p> <p>匹配ip地址：/d+/./d+/./d+/./d+</p> <p>评注：提取ip地址时有用</p> <p>匹配特定数字：</p> <p>^[1-9]/d*$ //匹配正整数</p> <p>^-[1-9]/d*$ //匹配负整数</p> <p>^-?[1-9]/d*$ //匹配整数</p> <p>^[1-9]/d*|0$ //匹配非负整数（正整数 + 0）</p> <p>^-[1-9]/d*|0$ //匹配非正整数（负整数 + 0）</p> <p>^[1-9]/d*/./d*|0/./d*[1-9]/d*$ //匹配正浮点数</p> <p>^-([1-9]/d*/./d*|0/./d*[1-9]/d*)$ //匹配负浮点数</p> <p>^-?([1-9]/d*/./d*|0/./d*[1-9]/d*|0?/.0+|0)$ //匹配浮点数</p> <p>^[1-9]/d*/./d*|0/./d*[1-9]/d*|0?/.0+|0$ //匹配非负浮点数（正浮点数 + 0）</p> <p>^(-([1-9]/d*/./d*|0/./d*[1-9]/d*))|0?/.0+|0$ //匹配非正浮点数（负浮点数 + 0）</p> <p>评注：处理大量数据时有用，具体应用时注意修正</p> <p>匹配特定字符串：</p> <p>^[A-Za-z]+$ //匹配由26个英文字母组成的字符串</p> <p>^[A-Z]+$ //匹配由26个英文字母的大写组成的字符串</p> <p>^[a-z]+$ //匹配由26个英文字母的小写组成的字符串</p> <p>^[A-Za-z0-9]+$ //匹配由数字和26个英文字母组成的字符串</p> <p>^/w+$ //匹配由数字、26个英文字母或者下划线组成的字符串</p> <p>评注：最基本也是最常用的一些表达式</p>

    <hr>
    <div class="pagination">
      <ul>
        <ul>
          
            <li class="prev"><a href="/2010/43.html" title="谷歌地图，要研究谷歌地图了">&larr; Previous</a></li>
          
          

            <li><a href="/archive">Archive</a></li>

          
            <li class="next"><a href="/2010/41.html" title="lucene 入门的小例子">Next &rarr;</a></li>
          
          
        </ul>
      </ul>
    </div>
    <hr>
     
  </div>
  
  <div class="span4">
    <h4>Published</h4>
    <div class="date"><span>2010-11-19</span></div>
    <br>
    <h4>Share to Weixin</h4>
    <div id="share-qrcode"></div>
    <script type="text/javascript">
      new QRCode(document.getElementById("share-qrcode"), {
        text:document.URL,
        width:128,
        height:128
      });
    </script>
    <br>
    <h4>Categories</h4>
    <ul class="tag_box">
    
      <li>
  <a href="/categories/#default-ref">default <span>108</span></a>
</li>
    
    </ul>
    <br>
    <h4>Tags</h4>
    <ul class="tag_box">
    
    </ul>
  </div>
</div>

      <footer>
        <p>&copy; 盒子 2016
          with help from <a href="http://github.com/wendal/gor" target="_blank" title="Gor -- Fast Blog">Gor</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
		  and Idea from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
            <a href="http://www.miitbeian.gov.cn" target="_blank">京ICP备17040577号-1</a> 
        </p>
        <p><a href="/info.html" target="_blank">网络监控</a></p>
      </footer>
    </div> <!-- /container -->
  </body>
</html>
